# 更新日誌

## [2.0.0] - 2025-01-12

### 🎉 **重大里程碑** - SkinCake 完全重構，全新技術架構

#### 🚀 全新架構重構
- **完全重寫** - 從舊版 SPA 架構遷移到 Next.js 14 + App Router
- **TypeScript 支援** - 100% TypeScript 類型安全
- **現代化構建** - Tailwind CSS 3 + PostCSS
- **性能優化** - SSG + ISR 混合渲染，大幅提升載入速度

#### ✨ 核心功能實現
- **智能文章系統** - 動態載入 WordPress 內容，支援無限分頁
- **進階分類篩選** - 5種排序方式（日期、標題、評論數）
- **雙視圖模式** - 網格視圖和列表視圖自由切換
- **全文搜尋引擎** - 即時搜尋所有文章內容
- **響應式設計** - 完美支援桌面、平板、手機三種裝置

#### 🎨 用戶界面革新
- **韓系美學** - 清新粉色主題，符合韓國美容風格
- **現代化佈局** - 簡潔明瞭的卡片式設計
- **模組化組件** - 可重用的 React 組件庫
- **SEO 優化** - 動態元數據和結構化數據

#### 📊 性能與優化
- **圖片優化** - Next.js Image 自動優化和懶載入
- **代碼分割** - 按路由自動分割，減少初始載入時間
- **快取策略** - ISR 和 SWR 智能快取機制
- **開發體驗** - TypeScript + ESLint + Prettier

#### 🔧 技術債務清理
**移除舊系統:**
- ❌ 移除舊版 SPA index.html 架構
- ❌ 移除 jQuery 依賴
- ❌ 移除自製輪播組件
- ❌ 移除手寫 CSS 樣式系統

**現代化替代:**
- ✅ Next.js 14 App Router
- ✅ React 18 Hooks
- ✅ Tailwind CSS 3
- ✅ TypeScript 5

#### 📱 頁面功能詳解
**首頁 (/):**
- 動態輪播圖、分類推薦、最新文章、標籤雲

**文章頁 (/blog/[slug]):**
- SEO 友好、社交分享、相關文章、目錄導航

**分類頁 (/category/[id]):**
- 進階篩選、相關分類、無限載入、側邊欄導航

**搜尋頁 (/search):**
- 即時搜尋、全文檢索、搜尋建議、結果統計

#### 🛠️ 部署與開發
- **Docker 容器化** - 一致的部署環境
- **Google Cloud Run** - 無伺服器容器部署
- **Cloud Build** - 自動化 CI/CD 流程
- **GitHub Actions** - 自動測試和部署

#### 📈 性能指標
- **Lighthouse 評分**: Performance 95+, Accessibility 100, SEO 100
- **Core Web Vitals**: LCP < 2.5s, FID < 100ms, CLS < 0.1

---

## [1.5.4] - 2024-12-19
### 優化
- **手機版體驗大幅提升**：重新設計 SkinCake專訪 區塊，完全解決手機版播放和滑動問題
- **原生滾動支援**：移除複雜的 Swiper 輪播組件，改用原生 CSS `overflow-x-auto` 橫向滾動
- **視覺設計優化**：採用卡片式設計，每個影片都有獨立的漸層背景和播放按鈕圖標
- **載入性能提升**：移除 Instagram 嵌入腳本依賴，減少頁面載入時間

### 修復
- **觸控操作問題**：完全支援手機觸控滑動，不再依賴 JavaScript 輪播庫
- **播放問題**：直接連結到 Instagram 影片頁面，避免嵌入播放器的兼容性問題

### 技術改進
- 移除 Instagram 嵌入代碼和相關 JavaScript 初始化
- 簡化代碼結構，提高維護性
- 優化滾動條樣式，提升視覺體驗

## [1.5.3] - 2024-12-19
### 優化
- **品牌頁面優化**：移除「從其他網站的評論」區塊，簡化頁面內容
- **佈局調整**：將「店家路線圖」移動到「診所資訊」上方，優化信息層次
- **地圖顯示優化**：調整 Google Map 高寬比從 16:9 改為 4:3，增加地圖顯示高度
- **UI 間距優化**：增加「複製地址」按鈕與地址文字間的間距，提升視覺體驗

### 修復
- **按鈕樣式修復**：修復診所資訊區塊中按鈕背景色顯示問題，使用內聯樣式確保正確顯示
  - 複製地址按鈕：深灰色背景
  - Naver Map 按鈕：綠色背景
  - Google Map 按鈕：藍色背景

## [1.5.1] - 2024-12-19
### 修復
- **重大修復**：解決 Google Search Console 重複內容索引問題
  - 修復 `public/blog/index.html` 中所有文章 URL 都請求相同 API 端點(ID: 758)的問題
  - 改為根據 URL slug 動態獲取對應文章：`/wp-json/wp/v2/posts?slug=${slug}`
  - 解決「網頁未編入索引：這是重複網頁；使用者未選取標準網頁」的 SEO 問題
  - 每個文章頁面現在會返回獨特的內容，提升 Google 索引效果

## [1.5.0] - 2024-05-19
### 新增
- 完成技術債第四階段：新版分類頁整合至 `index.html` SPA 架構。
- 新增品牌示範頁面。
- 新增重要提示註解系統 (累積自 v1.3.7-v1.4.1)。
- 新增工作流程自動化腳本 (累積自 v1.3.7-v1.4.1)。
- 新增口語化指令系統 (累積自 v1.3.7-v1.4.1)。

### 優化
- 優化文檔結構與工作流程 (累積自 v1.3.7-v1.4.1)。

### 修復
- 文章頁面功能修復與體驗優化。

## [1.4.1] - YYYY-MM-DD
### 修復
- 修正搜尋結果頁面 (`search.html`) 導航欄因未預先加載分類數據導致的分類連結 `undefined` 問題。

## [1.4.0] - YYYY-MM-DD
### 新增
- 創建 `scripts/update-hardcoded-categories.js` 腳本，用於從 WordPress API 同步分類數據到靜態文件。
- 在 `package.json` 中添加 `npm run update-categories` 命令。
- 更新 `docs/workflows/commands.md`，加入新的"小更新"口語化指令。

### 優化
- **SPA 架構優化 (第一階段)**：
    - 移除客戶端動態獲取分類數據的邏輯，改為從 `public/js/hardcoded-category-data.js` 同步加載。
    - 旨在提升首頁和舊版分類頁的加載性能，減少頁面閃爍。
- 調整分類更新腳本，允許包含文章數為零的特定分類。

### 修復
- 修復了因腳本加載順序問題導致的導航欄和分類卡片連結中分類ID為 `undefined` 的錯誤。
- 移除了分類更新腳本中關於不再使用的舊分類的警告。

## [1.3.7] - 2024-04-24
### 新增
- 新增重要提示註解系統，提高代碼可維護性
- 新增工作流程自動化腳本
- 新增口語化指令系統

### 優化
- 改進代碼註解的可讀性和完整性
- 統一錯誤處理標準
- 優化文檔結構和工作流程
- 改進版本更新流程

### 修復
- 修復文檔版本不一致問題
- 修復工作流程重複性問題

## [1.3.6] - 2024-04-23
### 優化
- GA追蹤：修復SPA頁面中GA重複觸發的問題
  - 移除loadTrackingCode中的GA重複初始化
  - 保留文章頁面的手動page_view觸發
  - 優化追蹤代碼加載邏輯

## [1.3.5] - 2024-04-22
### 新增
- Metadata KV 腳本：新增用於更新 Cloudflare KV 中 Metadata 的腳本 `scripts/metadata_kv_updater.js`。

### 優化
- Sitemap 生成：改進 `scripts/generate-sitemap.js`，使其更可靠且能包含更多頁面類型。
- Worker 配置：調整 `Skincake-Worker/wrangler.toml` 中的路由或快取設定。

## [1.3.4] - YYYY-MM-DD
### 新增
- 分類頁面：將文章顯示數量上限從預設 10 篇增加至 100 篇。

## [1.3.3] - YYYY-MM-DD
### 優化
- 導航列優化: 桌面版導航列連結改為依序淡入，提升視覺效果。
- 首頁卡片連結修正: "SkinCake 精選推薦"區塊的卡片連結直接指向帶有分類 ID 的頁面，確保連結在 JavaScript 映射失敗時仍有效。

## [1.3.2] - YYYY-MM-DD
### 修復
- GA追蹤：在 SPA 文章頁面動態載入後，手動觸發 `page_view` 事件，確保 GA 能正確記錄文章瀏覽。

## [1.3.1] - 2024-07-29
### 新增
- 文章頁面：添加 Shareon 社交分享按鈕 (複製連結)。
- 文章頁面：添加相關文章推薦區塊 (隨機顯示 6 篇)。

### 優化
- 文章頁面：調整分享按鈕位置與樣式。
- 文章頁面：修復佈局問題 (移除重複元素、調整間距)。

## [1.3.0] - YYYY-MM-DD
### 新增
- 實施 SPA 文章路由，統一全站文章連結格式為 `/blog/SLUG`
- 修復搜尋結果頁特色圖片顯示問題（採用二次請求方案）
- 動態顯示文章卡片的第一個標籤（替換硬編碼標籤）
- 修復首頁搜尋列功能

### 優化
- 調整首頁 "SkinCake 地圖" 廣告橫幅樣式（寬度、留白）
- 設定首頁 "SkinCake 地圖" 廣告橫幅連結在新分頁開啟

## [1.2.10] - 2024-03-21
### 新增
- 優化文章頁面 Open Graph 標籤動態載入邏輯
- 提升社交媒體分享體驗

## [1.2.9] - 2024-03-20
### 新增
- 完善版本更新流程文檔
- 添加 docs/guides/DEPLOYMENT_GUIDE.md 更新規範

## [1.2.8] - 2024-03-19
### 新增
- 添加文章頁面 Open Graph 標籤
- 優化社交媒體分享體驗

## [1.2.7] - 2024-03-18
### 新增
- 添加文章頁面
- 實現文章詳情展示功能

## [1.2.6] - 2024-03-17
### 新增
- 添加文章列表頁面
- 實現文章分類和分頁功能

## [1.2.5] - 2024-03-16
### 新增
- 添加首頁文章推薦功能
- 優化首頁佈局

## [1.2.4] - 2024-03-15
### 新增
- 添加首頁輪播圖功能
- 優化首頁佈局

## [1.2.3] - 2024-03-14
### 新增
- 添加首頁產品推薦功能
- 優化首頁佈局

## [1.2.2] - 2024-03-13
### 新增
- 添加首頁品牌故事功能
- 優化首頁佈局

## [1.2.1] - 2024-03-12
### 新增
- 添加首頁產品分類功能
- 優化首頁佈局

## [1.2.0] - 2024-03-11
### 新增
- 添加首頁產品展示功能
- 優化首頁佈局

## [1.1.0] - 2024-03-10
### 新增
- 添加產品詳情頁面
- 實現產品展示功能

## [1.0.0] - 2024-03-09
### 新增
- 初始版本
- 實現基本功能 